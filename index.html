<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>2025-06-13 金</title>
  <style>
    /* ボタン周りの簡易スタイル */
    #log-button {
      padding: 8px 16px;
      font-size: 1rem;
      margin-top: 16px;
    }
    #last-click {
      font-weight: bold;
      margin-left: 8px;
    }
  </style>
</head>
<body>
  <h1>2025-06-13 金</h1>
  <p>今日も一歩前へ進もう</p>

  <iframe
    width="360" height="640"
    src="https://www.youtube.com/embed/BUYUN3gXtd8?autoplay=1&mute=1&loop=1&playlist=BUYUN3gXtd8"
    frameborder="0"
    allow="autoplay; encrypted-media; picture-in-picture; web-share"
    allowfullscreen>
  </iframe>

  <!-- ここからログ送信パーツ -->
  <p>
    <button id="log-button">時刻をスプシに送信</button>
    最終送信時刻：<span id="last-click">まだ送信されていません</span>
  </p>

  <p><a href="logs/2025-06-13.html">この日の記録を見る</a></p>

  <script>
    const WEBHOOK_URL = 'https://script.google.com/macros/s/XXXXX/exec';  // ← ご自分のURLに差し替え

    const btn = document.getElementById('log-button');
    const last = document.getElementById('last-click');

    btn.addEventListener('click', async () => {
      const now = new Date();
      const iso = now.toISOString();
      const disp = now.toLocaleString();

      // ページ上に表示
      last.textContent = disp;

      // Webhookへ送信
      try {
        const res = await fetch(WEBHOOK_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ timestamp: iso })
        });
        if (!res.ok) console.error('送信失敗', res.status, await res.text());
      } catch (err) {
        console.error('送信エラー', err);
      }
    });
  </script>
</body>
</html>
